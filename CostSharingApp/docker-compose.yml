version: '3.8'

services:
  maui-builder:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: costsharing-builder
    volumes:
      # Mount source code for live development
      - .:/app
      # Mount output directory for built installers
      - ./output:/app/output
      # Cache NuGet packages
      - nuget-cache:/root/.nuget/packages
    environment:
      # .NET environment
      - DOTNET_CLI_TELEMETRY_OPTOUT=1
      - DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
      # Android build configuration
      - ANDROID_SDK_ROOT=/usr/local/android-sdk
      - JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
    working_dir: /app
    # Keep container running for interactive commands
    stdin_open: true
    tty: true
    command: bash

volumes:
  nuget-cache:
    driver: local
