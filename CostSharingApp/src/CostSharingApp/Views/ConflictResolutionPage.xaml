<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:CostSharingApp.ViewModels"
             x:Class="CostSharingApp.Views.ConflictResolutionPage"
             x:DataType="viewmodels:ConflictResolutionViewModel"
             Title="Resolve Sync Conflict">
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Warning Icon and Title -->
            <Label Text="⚠️"
                   FontSize="48"
                   HorizontalOptions="Center"
                   Margin="0,10,0,0"/>
            
            <Label Text="Sync Conflict Detected"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"/>
            
            <!-- Group Name -->
            <Label Text="{Binding GroupName}"
                   FontSize="18"
                   HorizontalOptions="Center"
                   TextColor="{DynamicResource Primary}"/>
            
            <!-- Description -->
            <Label Text="{Binding ConflictDescription}"
                   FontSize="14"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   TextColor="{DynamicResource Gray600}"
                   Margin="0,10,0,20"/>
            
            <!-- Local Version Card -->
            <Frame BorderColor="{DynamicResource Primary}"
                   BackgroundColor="{DynamicResource Gray100}"
                   Padding="15"
                   CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Local Version (This Device)"
                           FontSize="16"
                           FontAttributes="Bold"/>
                    
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Last modified:"
                               FontAttributes="Bold"
                               VerticalOptions="Center"/>
                        <Label Text="{Binding LocalLastModifiedText}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <Label Text="This is the version currently on your device."
                           FontSize="12"
                           TextColor="{DynamicResource Gray600}"/>
                    
                    <Button Text="Keep Local Version"
                            Command="{Binding KeepLocalCommand}"
                            BackgroundColor="{DynamicResource Primary}"
                            TextColor="White"
                            FontAttributes="Bold"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Remote Version Card -->
            <Frame BorderColor="{DynamicResource Secondary}"
                   BackgroundColor="{DynamicResource Gray100}"
                   Padding="15"
                   CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Remote Version (Google Drive)"
                           FontSize="16"
                           FontAttributes="Bold"/>
                    
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Last modified:"
                               FontAttributes="Bold"
                               VerticalOptions="Center"/>
                        <Label Text="{Binding RemoteLastModifiedText}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <Label Text="This is the version stored in Google Drive."
                           FontSize="12"
                           TextColor="{DynamicResource Gray600}"/>
                    
                    <Button Text="Keep Remote Version"
                            Command="{Binding KeepRemoteCommand}"
                            BackgroundColor="{DynamicResource Secondary}"
                            TextColor="White"
                            FontAttributes="Bold"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Warning -->
            <Frame BorderColor="{DynamicResource Warning}"
                   BackgroundColor="#FFF3CD"
                   Padding="10"
                   CornerRadius="8">
                <Label Text="⚠️ Warning: The version you don't keep will be permanently overwritten."
                       FontSize="12"
                       TextColor="#856404"
                       HorizontalTextAlignment="Center"/>
            </Frame>
            
            <!-- Cancel Button -->
            <Button Text="Cancel (Decide Later)"
                    Command="{Binding CancelCommand}"
                    BackgroundColor="{DynamicResource Gray400}"
                    TextColor="White"
                    Margin="0,10,0,20"/>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
